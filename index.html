<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Slide-o-Matic</title>
    <meta
      name="description"
      content="Slideomatic.app — voice-powered, pastel-punk slideshow engine. Launch a deck, start fresh, or upload your own JSON."
    />
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <main class="landing">
      <section class="landing__hero">
        <p class="landing__eyebrow">Slide-o-Matic</p>
        <h1 class="landing__title">Pick a slideshow. Change the vibe. Ship the story.</h1>
        <p class="landing__description">
          Launch the live deck, start a fresh canvas, or drop in your own JSON file. Slideomatic.app keeps the pastel-punk energy,
          theme controls, and voice tools ready to go.
        </p>
        <div class="landing__actions">
          <a class="button button--primary" href="deck.html">Open default deck</a>
          <a class="button button--outline" href="admin.html">Start new deck</a>
          <button class="button button--ghost" type="button" id="upload-btn">Upload deck JSON</button>
          <input type="file" id="upload-input" accept=".json,application/json" hidden />
        </div>
      </section>

      <section class="landing__grid" id="about">
        <article class="landing__panel">
          <h2>Pastel-punk slides, zero build steps.</h2>
          <p>
            Slide-o-Matic bundles a live deck runtime, a JSON editor, and a theme drawer. Swap art direction with a dropdown, edit
            slides while you present, or let Gemini draft new pages from voice prompts.
          </p>
        </article>

        <div class="landing__cards">
          <article class="landing__card">
            <h3>Voice-first workflow</h3>
            <p>Hold <strong>V</strong> or <strong>E</strong> inside the deck to add or edit slides by speaking — AI fills in the JSON.</p>
          </article>
          <article class="landing__card">
            <h3>Theme everything</h3>
            <p>Open the theme drawer to randomize palettes, prompt Gemini for a new vibe, or save presets to your local library.</p>
          </article>
          <article class="landing__card">
            <h3>JSON you can trust</h3>
            <p>Download the deck at any time. The editor validates against the schema so your exports stay portable.</p>
          </article>
        </div>
      </section>
    </main>

    <footer class="landing__footer">
      <div class="landing__footer-about">
        <strong>About Slide-o-Matic</strong>
        <p>
          A neo-brutalist, pastel-punk slideshow engine by
          <a href="https://bento.me/pibulus" target="_blank" rel="noopener">Pablo</a>. Built for rapid storytelling, on-the-fly edits,
          and theme explorations without a build pipeline.
        </p>
      </div>
      <div class="landing__footer-actions">
        <button class="link-button" type="button" data-open-intent="theme">Open theme drawer</button>
        <button class="link-button" type="button" data-open-intent="settings">Open settings</button>
        <a class="link-button" href="README.md" target="_blank" rel="noopener">Docs</a>
      </div>
    </footer>

    <script type="module">
      const uploadBtn = document.getElementById('upload-btn');
      const uploadInput = document.getElementById('upload-input');
      const actionButtons = document.querySelectorAll('[data-open-intent]');

      uploadBtn?.addEventListener('click', () => uploadInput?.click());

      uploadInput?.addEventListener('change', (event) => {
        const file = event.target.files?.[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = () => {
          try {
            JSON.parse(reader.result);
          } catch (error) {
            alert('That file is not valid JSON. Please pick a deck JSON export.');
            return;
          }

          const objectUrl = URL.createObjectURL(file);
          const target = new URL('deck.html', window.location.href);
          target.searchParams.set('slides', objectUrl);
          target.searchParams.set('open', 'theme');
          window.location.href = target.toString();
        };

        reader.onerror = () => {
          alert('Unable to read that file. Please try again.');
        };

        reader.readAsText(file);
      });

      actionButtons.forEach((button) => {
        button.addEventListener('click', () => {
          const intent = button.dataset.openIntent;
          const target = new URL('deck.html', window.location.href);
          if (intent) {
            target.searchParams.set('open', intent);
          }
          window.location.href = target.toString();
        });
      });
    </script>
  </body>
</html>
